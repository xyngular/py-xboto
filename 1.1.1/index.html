
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>xboto</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="xboto" class="md-header__button md-logo" aria-label="xboto" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            xboto
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="xboto" class="md-nav__button md-logo" aria-label="xboto" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    xboto
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="index.html" class="md-nav__link md-nav__link--active">
        Home
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    Install
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    Quick Start
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#import-boto-clientresource" class="md-nav__link">
    Import Boto Client/Resource
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grab-any-clientresource" class="md-nav__link">
    Grab Any Client/Resource
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benefits" class="md-nav__link">
    Benefits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use" class="md-nav__link">
    How To Use
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-deprecated" class="md-nav__link">
    Configuration (Deprecated)
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    Install
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    Quick Start
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#import-boto-clientresource" class="md-nav__link">
    Import Boto Client/Resource
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grab-any-clientresource" class="md-nav__link">
    Grab Any Client/Resource
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benefits" class="md-nav__link">
    Benefits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use" class="md-nav__link">
    How To Use
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-deprecated" class="md-nav__link">
    Configuration (Deprecated)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Home</h1>

<p>Provide an easy way to get a lazy, shared, thread-safe boto3 client/resource.</p>
<!-- markdownlint-disable -->
<p><img alt="PythonSupport" src="https://img.shields.io/static/v1?label=python&amp;message=%203.8|%203.9|%203.10|%203.11&amp;color=blue?style=flat-square&amp;logo=python" />
<img alt="PyPI version" src="https://badge.fury.io/py/xboto.svg?" /></p>
<h2 id="documentation">Documentation<a class="headerlink" href="#documentation" title="Permanent link">&para;</a></h2>
<p><strong><a href="https://xyngular.github.io/py-xboto/latest/">📄 Detailed Documentation</a></strong> | <strong><a href="https://pypi.org/project/xboto/">🐍 PyPi</a></strong></p>
<h2 id="install">Install<a class="headerlink" href="#install" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># via pip</span>
pip<span class="w"> </span>install<span class="w"> </span>xboto

<span class="c1"># via poetry</span>
poetry<span class="w"> </span>add<span class="w"> </span>xboto
</code></pre></div></td></tr></table></div>
<h2 id="quick-start">Quick Start<a class="headerlink" href="#quick-start" title="Permanent link">&para;</a></h2>
<h3 id="import-boto-clientresource">Import Boto Client/Resource<a class="headerlink" href="#import-boto-clientresource" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Use imported `dynamodb` just like dynamodb boto resource</span>
<span class="kn">from</span> <span class="nn">xboto.resource</span> <span class="kn">import</span> <span class="n">dynamodb</span>

<span class="c1"># Use imported `ssm` just like ssm boto client</span>
<span class="kn">from</span> <span class="nn">xboto.client</span> <span class="kn">import</span> <span class="n">ssm</span>

<span class="c1"># These are for overriding/injecting settings.</span>
<span class="kn">from</span> <span class="nn">xboto</span> <span class="kn">import</span> <span class="n">BotoResources</span><span class="p">,</span> <span class="n">BotoClients</span><span class="p">,</span> <span class="n">BotoSession</span>

<span class="c1"># Can use them like normal:</span>
<span class="n">dynamodb</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">ssm</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>


<span class="c1"># Or you can override settings if you wish:</span>
<span class="k">with</span> <span class="n">BotoResources</span><span class="o">.</span><span class="n">DynamoDB</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-west-2&#39;</span><span class="p">):</span>
    <span class="c1"># Use us-west-2 when using dynamodb boto resource:</span>
    <span class="n">dynamodb</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="k">with</span> <span class="n">BotoClients</span><span class="o">.</span><span class="n">Ssm</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-west-2&#39;</span><span class="p">):</span>
    <span class="c1"># Use us-west-2 when using ssm boto client:</span>
    <span class="n">ssm</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="k">with</span> <span class="n">BotoSession</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-west-3&#39;</span><span class="p">):</span>
    <span class="c1"># Use us-west-3 when using any client/resource</span>
    <span class="c1"># we are setting it at the boto-session level;</span>
    <span class="c1"># the session is used by all boto client/resources.</span>
    <span class="n">ssm</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>


<span class="c1"># Can use them like decorators as well:</span>
<span class="nd">@BotoClients</span><span class="o">.</span><span class="n">Ssm</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-west-2&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">():</span>
    <span class="n">ssm</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="grab-any-clientresource">Grab Any Client/Resource<a class="headerlink" href="#grab-any-clientresource" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Can easily ask these for any client/resource</span>
<span class="kn">from</span> <span class="nn">xboto</span> <span class="kn">import</span> <span class="n">boto_clients</span><span class="p">,</span> <span class="n">boto_resources</span>

<span class="c1"># These are for overriding/injecting settings.</span>
<span class="kn">from</span> <span class="nn">xboto</span> <span class="kn">import</span> <span class="n">BotoResources</span><span class="p">,</span> <span class="n">BotoClients</span><span class="p">,</span> <span class="n">BotoSession</span>

<span class="c1"># Can use them like normal:</span>
<span class="n">boto_clients</span><span class="o">.</span><span class="n">dynamodb</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">boto_resources</span><span class="o">.</span><span class="n">ssm</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>


<span class="c1"># Or you can override settings if you wish:</span>
<span class="k">with</span> <span class="n">BotoResources</span><span class="o">.</span><span class="n">DynamoDB</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-west-2&#39;</span><span class="p">):</span>
    <span class="c1"># Use us-west-2 when using dynamodb boto resource:</span>
    <span class="n">boto_resources</span><span class="o">.</span><span class="n">dynamodb</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="k">with</span> <span class="n">BotoClients</span><span class="o">.</span><span class="n">Ssm</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-west-2&#39;</span><span class="p">):</span>
    <span class="c1"># Use us-west-2 when using ssm boto client:</span>
    <span class="n">boto_clients</span><span class="o">.</span><span class="n">ssm</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="k">with</span> <span class="n">BotoSession</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-west-3&#39;</span><span class="p">):</span>
    <span class="c1"># Use us-west-3 when using any client/resource</span>
    <span class="c1"># we are setting it at the boto-session level;</span>
    <span class="c1"># the session is used by all boto client/resources.</span>
    <span class="n">boto_clients</span><span class="o">.</span><span class="n">ssm</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>


<span class="c1"># Can use them like decorators as well:</span>
<span class="nd">@BotoClients</span><span class="o">.</span><span class="n">Ssm</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-west-2&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">some_method</span><span class="p">():</span>
    <span class="n">boto_clients</span><span class="o">.</span><span class="n">ssm</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="benefits">Benefits<a class="headerlink" href="#benefits" title="Permanent link">&para;</a></h2>
<p>Here are some of the benefits:</p>
<ul>
<li>Lazily created, so we only create the ones that are needed on-demand.</li>
<li>Allows code to use <code>moto</code> more easily (boto/aws mocking), as <code>moto</code> needs the client/resource
    to be created after unit-test starts.</li>
<li>The boto client/resources are shared when code runs on the same thread.</li>
<li>This allows reusing already open connections to their services (such as dynamodb, ssm, etc).</li>
<li>Guaranteed to get a shared client/resource for each thread.</li>
<li>Using xyn-aws will allow you to easily use boto3 in a thread-safe manner.</li>
<li>They are cleaned-up/thrown-away between each unit test run.</li>
<li>xyn-aws uses xyn-resource to help it clean-up and share the boto resources/clients.</li>
<li>Clients/Resources are all automatically cleared out at start of unit-test.</li>
<li>Then they are re-created lazily, as needed, during each unit test function run (as with any xyn-resource).</li>
</ul>
<h2 id="how-to-use">How To Use<a class="headerlink" href="#how-to-use" title="Permanent link">&para;</a></h2>
<p>There are two main ways to use this library.</p>
<p>You can import the lazily boto3 client/resource like so:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">xboto.client</span> <span class="kn">import</span> <span class="n">ssm</span>

<span class="k">def</span> <span class="nf">some_function</span><span class="p">():</span>
    <span class="c1"># You can use it just like the normal boto3 ssm client.</span>
    <span class="c1"># Call the standard ssm client `get_paginator` method:</span>
    <span class="n">my_paginator</span> <span class="o">=</span> <span class="n">ssm</span><span class="o">.</span><span class="n">get_paginator</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>In this example above, every time you use <code>ssm</code>, it will lazily lookup the current shared ssm
client for the current thread. If it does not exist yet, it will create the client for you.</p>
<p>The same thing exists for boto3 resources:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">xboto.resource</span> <span class="kn">import</span> <span class="n">dynamodb</span>

<span class="k">def</span> <span class="nf">some_function</span><span class="p">():</span>
    <span class="c1"># You can use it just like the normal boto3 dynamodb resource.</span>
    <span class="c1"># Create the standard dynamodb resource `Table` object:</span>
    <span class="n">my_table</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;my-table-name&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>There are type-hints on these modules for common clients we use,
but you can import anything boto supports even if there is not type-hint defined for it (yet).</p>
<p>If you do end up importing something boto does not support, you'll only get an error when you first
attempt to use the imported client. This is because we don't attempt to create the client until
the first time it's used.</p>
<p>The other way you can get a boto client/resource is though a special proxy object.
With this proxy object, you can ask it for any standard boto3 client:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Simply import and use it as-if it&#39;s a ready-to-go client.</span>
<span class="c1"># (you can use `xboto.client` for clients)</span>
<span class="kn">from</span> <span class="nn">xboto</span> <span class="kn">import</span> <span class="n">boto_clients</span>

<span class="k">def</span> <span class="nf">some_func</span><span class="p">():</span>
    <span class="c1"># You can use it just like the normal boto3 ssm client.</span>
    <span class="c1"># Every time you use it, it will lazily lookup the current one for the current thread.</span>
    <span class="n">ssm_paginator</span> <span class="o">=</span> <span class="n">boto_clients</span><span class="o">.</span><span class="n">ssm</span><span class="o">.</span><span class="n">get_paginator</span><span class="p">(</span><span class="s1">&#39;get_parameters_by_path&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Or any standard boto3 resource:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">xboto</span> <span class="kn">import</span> <span class="n">boto_resources</span>

<span class="k">def</span> <span class="nf">some_func</span><span class="p">():</span>
    <span class="n">my_table</span> <span class="o">=</span> <span class="n">boto_resources</span><span class="o">.</span><span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;my-table-name&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>You can also get them directly from the top-level module with a
less-verbose name:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">xboto</span>

<span class="k">def</span> <span class="nf">some_func</span><span class="p">():</span>
    <span class="n">my_table</span> <span class="o">=</span> <span class="n">xboto</span><span class="o">.</span><span class="n">resource</span><span class="o">.</span><span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;my-table-name&#39;</span><span class="p">)</span>
    <span class="n">my_ssm</span> <span class="o">=</span> <span class="n">xboto</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">ssm</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s1">&#39;/some-key&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Finally, you can also import these and directly use them:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Client won&#39;t actually be created until it&#39;s actually used</span>
<span class="c1"># for the first time (lazily)</span>
<span class="kn">from</span> <span class="nn">xboto.resource</span> <span class="kn">import</span> <span class="n">dynamodb</span>
<span class="kn">from</span> <span class="nn">xboto.client</span> <span class="kn">import</span> <span class="n">ssm</span>

<span class="k">def</span> <span class="nf">some_func</span><span class="p">():</span>
    <span class="c1"># Client is created the first time here (first use)</span>
    <span class="c1"># It did not happen when they were imported.</span>

    <span class="n">my_table</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;my-table-name&#39;</span><span class="p">)</span>
    <span class="n">my_ssm</span> <span class="o">=</span> <span class="n">ssm</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s1">&#39;/some-key&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="configuration-deprecated">Configuration (Deprecated)<a class="headerlink" href="#configuration-deprecated" title="Permanent link">&para;</a></h2>
<p>To change the endpoint_url used when boto3 creates a new client or resource,
set the settings file to the value desired.  This will be used in:</p>
<p>In your project <code>conf.py</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">xyn_config</span> <span class="kn">import</span> <span class="n">ConfigSettings</span><span class="p">,</span> <span class="n">config</span>
<span class="kn">from</span> <span class="nn">xboto.conf</span> <span class="kn">import</span> <span class="n">Boto3Settings</span>


<span class="k">class</span> <span class="nc">MyProjectSettings</span><span class="p">(</span><span class="n">ConfigSettings</span><span class="p">):</span>
    <span class="n">boto3_endpoint_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;http://endpoint_url&quot;</span>

<span class="n">Boto3Settings</span><span class="o">.</span><span class="n">endpoint_url</span> <span class="o">=</span> <span class="n">MyProjectSettings</span><span class="o">.</span><span class="n">boto3_endpoint_url</span>
</code></pre></div></td></tr></table></div>
<p>This would allow you to change by an environment variable for local dynamodb, for example.</p>
<p><code>.env</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="na">BOTO3_ENDPOINT_URL</span><span class="o">=</span><span class="s">http://localhost:55000</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">&#39;awsservice&#39;</span><span class="p">,</span> <span class="n">endpoint_url</span><span class="o">=</span><span class="n">VALUE_FROM_CONF</span><span class="p">)</span>
<span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;awsresource&#39;</span><span class="p">,</span> <span class="n">endpoint_url</span><span class="o">=</span><span class="n">VALUE_FROM_CONF</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2023-07-03
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.sections", "navigation.expand", "navigation.top", "navigation.indexes", "navigation.tracking", "content.code.annotate"], "search": "assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>